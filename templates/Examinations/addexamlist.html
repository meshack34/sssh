{% extends 'base.html' %}


{% block body_block %}
{% load static %}

<div class="container-fluid">
    <div class="row">
        <div class="main-header">
           <h4>Exam List</h4>
           <div style="float: right;padding-right: 10px;">
            {% if 'exam_add' in request.permissions or request.user.is_superuser %}
            <button type="button" class="btn btn-dark" data-toggle="modal" data-target=".bd-example-modal-lg">+ New Exam</button>
            {% endif %}
            {% if 'link_exam_view' in request.permissions or request.user.is_superuser %}
            <button type="button" class="btn btn-dark"  data-toggle="modal" data-target=".linkexam"> Link Exam</button>
            {% endif %}
           </div>

        </div>
     </div>

     <!-- New Exam Modal -->
     <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Exam</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <form method="post">

                <div class="modal-body">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-12">
                                {{form}}
                            </div>
                        </div>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save </button>
                  </div>
                </form>
            </div>
        </div>
      </div>
     <!-- New Exam Modal End -->
  <!-- Link Exam Modal -->
  <div class="modal fade linkexam" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Link Exam</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form method="post">

            <div class="modal-body">
                {% csrf_token %}
                <table class="tabindex">
                    <thead>
                        <tr>
                            <th><input type="checkbox" class="form-control"></th>
                            <th>Exam </th>
                            <th>Weightage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th><input type="checkbox" class="form-control"></th>
                            <th>Unit Test</th>
                            <th><input type="number" class="form-control"></th>
                        </tr>
                        <tr>
                            <th><input type="checkbox" class="form-control"></th>
                            <th>Final Exam</th>
                            <th><input type="number" class="form-control"></th>
                        </tr>
                    </tbody>
                </table>



            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" style="float: left;">Reset Link Exam</button>
                <button type="button" class="btn btn-primary">Save</button>
              </div>
            </form>
        </div>
    </div>
  </div>
 <!-- Link Exam Modal End -->

    <div class="col-md-12">
        {% if 'exam_view' in request.permissions or request.user.is_superuser %}
            <div class="col-md-12">
                <div class="card" style="padding: 10px;border-top: 5px solid black;">
                    <div class="main-header">
                        <div class="col-md-3">
                            <h5>Exam Group </h5>
                            <p>{{exam_groups.name}}</p>
                        </div>
                        <div class="col-md-3">
                            <h5>Exam Type </h5>
                            <p>{{exam_groups.exam_type}} </p>
                        </div>
                        <div class="col-md-3">
                            <h5>Description </h5>
                            <p>{{exam_groups.description}}</p>
                        </div>
                     </div>
                    <div class="table-responsive"><br>
                    <table id="tableID" class="display"  >
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Session</th>
                                <th>Subjects Included</th>
                                <th>Status</th>
                                <th>Publish Result</th>
                                <th>Description</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for data in records %}
                                <tr>
                                    <td>{{ data.Exam }}</td>
                                    <td>{{ data.session }}</td>
                                    <td>
                                        <input type="checkbox" {% if data.publish %}checked{% endif %} >
                                    </td>
                                    <td>{{ data.publish }}</td>
                                    <td>{{ data.publish_result }}</td>
                                    <td>{{ data.description }}</td>
                                    <td>
                                        {% if 'exam_assign_view_student_view' in request.permissions or request.user.is_superuser %}
                                        <a href="{% url 'assign_view_student' data.id %}" style="color: black;"  data-toggle="tooltip" data-placement="top" title="Assign/ View Student"><i class="fa fa-tag "></i></a>
                                        {% endif %}
                                        {% if 'exam_subject_view' in request.permissions or request.user.is_superuser %}
                                        <a href="{% url 'addexamsubject' data.id %}" style="color: black;"  data-toggle="tooltip" data-placement="top" title="Exam Subject"><i class="fa fa-file-text"></i></a>
                                        {% endif %}
                                        {% if 'exam_mark_view' in request.permissions or request.user.is_superuser %}
                                        <a href="{% url 'addexammark' data.id %}" style="color: black;"  data-toggle="tooltip" data-placement="top" title="Exam Mark"><i class="fa fa-address-card-o"></i></a>
                                        {% endif %}
                                        {% if 'exam_edit' in request.permissions or request.user.is_superuser %}
                                        <a href="{% url 'addexamlist_edit' data.id %}" style="color: black;" data-toggle="tooltip" data-placement="top" title="Edit"><i class='fa fa-edit'></i></a>
                                        {% endif %}
                                        {% if 'exam_delete' in request.permissions or request.user.is_superuser %}
                                        <a href="{% url 'addexamlist_delete' data.id %}" style="color: black;" data-toggle="tooltip" data-placement="top" title="Delete"><i class='fa fa-remove' onclick="alert('You want to Delete this Item..?')"></i></a>
                                        {% endif %}
                                    </td>
                                </tr>
                        {% endfor %}



                        </tbody>

                    </table>
                    </div>
                 </div>
            </div>
            {% endif %}
        </div>
    </div>
    </div>



 {% endblock %}
 {% block script_block %}

 {% endblock  %}